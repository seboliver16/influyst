(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{7047:function(e,t,r){Promise.resolve().then(r.bind(r,7884))},7884:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return j}});var s=r(7437),i=r(2265),n=r(2730),a=r(8121),o=r(7549),l=r(9902),d=r(7675),c=r(1231),u=r(1399);let h=(0,d.cF)();async function g(e,t){return new Promise((r,s)=>{let i=new Image;i.src=e,i.onload=()=>{let e=document.createElement("canvas"),n=e.getContext("2d");if(!n){s(Error("Unable to get canvas context"));return}e.width=t.width,e.height=t.height,n.drawImage(i,t.x,t.y,t.width,t.height,0,0,e.width,e.height),e.toBlob(e=>{if(!e){s(Error("Canvas is empty"));return}r(e)},"image/jpeg")},i.onerror=()=>{s(Error("Image failed to load"))}})}var x=e=>{let{setProfilePictureUploaded:t}=e,[r,x]=(0,i.useState)(null),[m,p]=(0,i.useState)({x:0,y:0}),[f,j]=(0,i.useState)(1),[b,w]=(0,i.useState)(null),[v,y]=(0,i.useState)(!1);(0,n.v0)(o.Z);let N=async e=>{if(e.target.files&&e.target.files.length>0){let t=new FileReader;t.onload=()=>{x(t.result)},t.readAsDataURL(e.target.files[0])}},C=(0,i.useCallback)((e,t)=>{w(t)},[]),k=async()=>{let e=(0,n.v0)(),s=(0,a.ad)(),i=e.currentUser;if(!i){alert("You must be logged in to upload an image.");return}if(r&&b){y(!0);try{let e=await g(r,b),n=new File([e],"".concat((0,c.Z)(),".jpg"),{type:"image/jpeg"}),o=(0,d.iH)(h,"headshots/".concat(n.name));await (0,d.KV)(o,n);let l=await (0,d.Jt)(o),u=(0,a.JU)(s,"users",i.uid);await (0,a.r7)(u,{profilePicture:l}),t(!0),alert("Image uploaded and profile updated successfully")}catch(e){console.error("Error during image upload or profile update:",e),alert("Upload failed: ".concat(e))}finally{y(!1)}}};return(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("label",{htmlFor:"file-input",className:"w-36 h-36 bg-indigo-400 rounded-lg overflow-hidden flex items-center justify-center cursor-pointer",children:r?(0,s.jsx)("div",{style:{position:"relative",width:"100%",height:"100%"},children:(0,s.jsx)(l.ZP,{image:r,crop:m,zoom:f,aspect:1,onCropChange:p,onCropComplete:C,onZoomChange:j,style:{containerStyle:{width:"100%",height:"100%"}}})}):(0,s.jsx)("div",{className:"text-white",children:(0,s.jsx)(u.Dmm,{size:"40"})})}),(0,s.jsx)("input",{id:"file-input",type:"file",accept:"image/*",onChange:N,className:"hidden"}),r&&(0,s.jsx)("button",{className:"mt-3 bg-indigo-400 text-white py-2 px-4 rounded hover:bg-indigo-500 transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50",onClick:k,disabled:v,children:v?"Uploading...":"Upload & Continue"})]})},m=r(703),p=e=>{let{setStep:t}=e,[r,o]=(0,i.useState)([]),[l,d]=(0,i.useState)(""),c=(0,n.v0)(),u=(0,a.ad)(),h=c.currentUser,g=()=>{""!==l.trim()&&r.length<3&&!r.includes(l.trim())&&l.trim().length<=20&&(o([...r,l.trim()]),d(""))},x=e=>{o(r.filter((t,r)=>r!==e))},m=async()=>{let e=(0,a.JU)(u,"users",h.uid);try{await (0,a.r7)(e,{industries:r}),t(3)}catch(e){console.error("Error updating document: ",e)}};return(0,s.jsxs)("div",{className:"p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{className:"border rounded p-2 flex-1",type:"text",value:l,onChange:e=>d(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(g(),e.preventDefault())},placeholder:"Type industry and press add or enter",maxLength:20}),(0,s.jsx)("button",{className:"ml-2 bg-indigo-500 text-white p-2 rounded hover:bg-indigo-700 disabled:opacity-50",onClick:g,disabled:!l||r.length>=3,children:"add"})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:r.map((e,t)=>(0,s.jsxs)("div",{className:"bg-blue-100 border rounded px-4 py-1 flex items-center",children:[e,(0,s.jsx)("button",{onClick:()=>x(t),className:"ml-2 bg-red-500 hover:bg-grey-600 rounded-full p-1 text-white",children:"x"})]},t))}),r.length>0&&(0,s.jsx)("button",{className:"w-full bg-indigo-300 hover:bg-ingifo-600 text-black py-2 px-4 rounded",onClick:m,children:"Continue"})]})},f=e=>{let{setStep:t}=e,[r,l]=(0,i.useState)(""),d=(0,a.ad)(o.Z),c=(0,n.v0)().currentUser,u=async()=>{let e=(0,a.JU)(d,"users",c.uid);try{await (0,a.r7)(e,{bio:r}),t(4)}catch(e){console.error("Error updating bio: ",e)}};return(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("textarea",{className:"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter your bio",value:r,onChange:e=>{l(e.target.value.slice(0,500))},rows:6}),(0,s.jsx)("button",{className:"mt-4 bg-indigo-400 hover:bg-indigo-500 text-white py-2 px-4 rounded transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50",onClick:u,children:"Save Bio"})]})},j=()=>{let[e,t]=(0,i.useState)(null),[r,l]=(0,i.useState)(!1),[d,c]=(0,i.useState)(1),u=(0,n.v0)(o.Z),h=(0,a.ad)(o.Z);(0,i.useEffect)(()=>{let e=(0,n.Aj)(u,async e=>{if(e){let r=(0,a.JU)(h,"users",e.uid),s=await (0,a.QT)(r);s.exists()?(t(s.data()),s.data().profilePicture&&(c(2),s.data().industries&&(c(3),s.data().bio&&c(4)))):console.error("User document does not exist")}else t(null)});return()=>e()},[u,h]);let g=e=>{let t="rounded-full transition duration-500 ease-in-out h-12 w-12 py-3 border-2 flex justify-center items-center";return d>=e?"".concat(t," bg-indigo-400 border-indigo-400"):"".concat(t," bg-white border-gray-300")};return(0,s.jsxs)("div",{className:"container mx-auto px-4",children:[(0,s.jsxs)("header",{className:"flex justify-between items-center p-5 border-b",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(m.default,{src:"/logo.svg",height:25,width:25,alt:"Logo"}),(0,s.jsx)("span",{className:"text-xl font-bold",children:"Influyst"})]}),(0,s.jsx)("div",{className:"bg-indigo-400 text-white rounded-full w-10 h-10 flex justify-center items-center text-lg font-semibold",children:null==e?void 0:e.username.substring(0,2).toUpperCase()})]}),(0,s.jsxs)("main",{className:"py-10",children:[(0,s.jsxs)("div",{className:"flex items-center mb-6",children:[(0,s.jsx)("div",{className:g(1),children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"h-6 w-6 text-white",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,s.jsx)("div",{className:"flex-auto border-t-2 transition duration-500 ease-in-out border-gray-300"}),(0,s.jsx)("div",{className:g(2),children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"h-6 w-6 text-white",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,s.jsx)("div",{className:"flex-auto border-t-2 transition duration-500 ease-in-out border-gray-300"}),(0,s.jsx)("div",{className:g(3),children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"h-6 w-6 text-white",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]}),1===d&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{children:"Upload Profile Pic"}),(0,s.jsx)(x,{setProfilePictureUploaded:()=>{l(!0),c(2)}})]}),2===d&&e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{children:"Add Industries"}),(0,s.jsx)(p,{setStep:()=>c(3)})]}),3===d&&e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{children:"Add Bio"}),(0,s.jsx)(f,{setStep:()=>c(4)})]}),4===d&&e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{children:"Add Socials"}),(0,s.jsx)("h6",{children:"skip"})]})]})]})}},7549:function(e,t,r){"use strict";var s=r(6142);let i=0===(0,s.C6)().length?(0,s.ZF)({apiKey:"AIzaSyDdYTscIPOOUJqvDIq1KC3qIOnXlvMLb2g",authDomain:"influyst-283ff.firebaseapp.com",projectId:"influyst-283ff",storageBucket:"influyst-283ff.appspot.com",messagingSenderId:"1020141181358",appId:"1:1020141181358:web:538375614344acba0b903f",measurementId:"G-4SGK4VBYD7"}):(0,s.C6)()[0];t.Z=i}},function(e){e.O(0,[452,358,699,839,279,194,878,971,69,744],function(){return e(e.s=7047)}),_N_E=e.O()}]);